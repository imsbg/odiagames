<!DOCTYPE html>
<html lang="or">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Bagh Chheli (ବାଘ ଛେଳି)</title>
      <meta name="description" content="Play Bagha Chheli Khela online! Experience the classic Odia strategy game where tigers and goats battle brains and moves. Free and easy to play." />
  <meta name="keywords" content="Bagha Chheli Khela, Odia game, Bagh Chal, Tiger Goat game, traditional games of Odisha, play Bagha Chheli online, strategy games India, rural Odia games, folk games Odisha, free board game, ବାଘ ଛେଳି,ବାଘ ଛେଳି ଖେଳ" />
  <meta name="author" content="Sandeep Biswal G" />

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Bagh Chheli (ବାଘ ଛେଳି) - Traditional Odia Tiger and Goat Game" />
  <meta property="og:description" content="Enjoy Bagha Chheli Khela, the classic Odia strategy game of tiger vs goat. Play online for free!" />
  <meta property="og:image" content="/bagha-chheli.png" />
  <meta property="og:url" content="https://odiagames.site/bagha-chheli" />
  <meta property="og:type" content="website" />

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/imsbg/odiagames/refs/heads/main/bagha-chheli/bagha-chheli.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/imsbg/odiagames/refs/heads/main/bagha-chheli/bagha-chheli.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/imsbg/odiagames/refs/heads/main/bagha-chheli/bagha-chheli.png" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://odiagames.site/bagha-chheli" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Noto+Sans+Oriya:wght@400;700&display=swap');
        :root {
            --primary-green: #9acd32; --light-grey-bg: #f4f4f9; --container-bg: #ffffff;
            --text-dark: #333333; --text-light: #ffffff; --line-color: #444444;
            --highlight-color: #9acd32; --score-blue: #00bfff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Noto Sans Oriya', 'Nunito', sans-serif; background-color: var(--light-grey-bg);
            color: var(--text-dark); display: flex; justify-content: center; align-items: flex-start; min-height: 100vh;
        }
        .main-container { width: 100%; max-width: 450px; height: 100vh; display: flex; flex-direction: column; }
        header {
            background-color: var(--primary-green); padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center; color: var(--text-dark);
        }
        .header-left { display: flex; align-items: center; }
        .back-arrow { font-size: 2em; font-weight: bold; cursor: pointer; margin-right: 15px; text-decoration: none; color: inherit;}
        .header-title { font-size: 1.5em; font-weight: 800; }
        .header-right-buttons { display: flex; align-items: center; gap: 10px; }
        .header-btn {
            background-color: rgba(255,255,255,0.4); border: 1px solid var(--text-dark);
            color: var(--text-dark); font-family: 'Nunito', sans-serif;
            border-radius: 20px; font-weight: bold; cursor: pointer;
            padding: 8px 12px; text-decoration: none;
        }
        .lang-btn {
            border-radius: 50%; width: 40px; height: 40px; padding: 0;
            display: flex; align-items: center; justify-content: center;
        }
        .screen {
            padding: 20px; flex-grow: 1; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; gap: 3vh;
        }
        #score-panel {
            display: flex; justify-content: space-between; align-items: center; width: 100%;
            background-color: #e9e9f1; border-radius: 12px; padding: 5px; font-weight: 700;
        }
        .player-box { width: 45%; padding: 10px; border-radius: 10px; text-align: center; transition: all 0.3s; }
        .player-box .name { font-size: 1.2em; }
        .player-box .score { font-size: 1.1em; font-weight: 800; }
        .player-box#tiger-player-box .score { color: var(--score-blue); font-size: 1.4em; }
        .active-player { background-color: var(--primary-green); color: var(--text-dark); }
        .vs-text { font-weight: 800; }
        .board-wrapper {
            width: 100%; padding: 5px; /* Using less padding to let SVG breathe */
            background-color: var(--container-bg);
            border-radius: 20px; box-shadow: 0 4px 20px var(--shadow-color);
        }
        #game-board-svg { width: 100%; aspect-ratio: 1 / 1; }
        #game-board-svg line { stroke: var(--line-color); stroke-width: 2.5; stroke-linecap: round; }
        #game-board-svg .clickable-point { fill: transparent; cursor: pointer; }
        #game-board-svg .piece-image {
             pointer-events: none;
             transition: all 0.2s ease-out;
             transform-origin: center center;
        }
        /* --- THIS IS THE CORRECTED SELECTION STYLE --- */
        #game-board-svg .piece-image.selected {
            transform: scale(1.15); /* Makes the selected piece slightly bigger */
            filter: drop-shadow(0px 0px 6px var(--highlight-color)); /* The green glow effect */
        }
        #game-info { margin-top: auto; padding-top: 20px; text-align: center;}
        #status-message { font-size: 1.2em; font-weight: bold; color: var(--text-dark); min-height: 25px; }
        #restart-btn {
            background-color: var(--primary-green); border: none; color: var(--text-dark);
            padding: 10px 30px; border-radius: 10px; font-family: 'Nunito', sans-serif;
            font-size: 1.1em; font-weight: 700; cursor: pointer; margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header>
            <div class="header-left">
                <a href="https://odiagames.site/" class="back-arrow">←</a>
                <div class="header-title" data-lang-key="gameTitle"></div>
            </div>
            <div class="header-right-buttons">
                <a href="https://odiagames.site/bagha-chheli/online" class="header-btn" data-lang-key="online"></a>
                <button id="lang-switch-btn" class="header-btn lang-btn"></button>
            </div>
        </header>
        <div id="game-screen" class="screen">
            <div id="score-panel">
                <div id="tiger-player-box" class="player-box">
                    <div class="name" data-lang-key="tigers"></div>
                    <div class="score" id="tiger-score"></div>
                </div>
                <div class="vs-text">vs</div>
                <div id="goat-player-box" class="player-box">
                    <div class="name" data-lang-key="goats"></div>
                    <div class="score" id="goat-score"></div>
                </div>
            </div>
            <div class="board-wrapper">
                <!-- THE VIEWBOX FIX: Adding "padding" inside the SVG canvas -->
                <svg id="game-board-svg" viewBox="-15 -15 130 130"></svg>
            </div>
            <div id="game-info">
                <div id="status-message"></div>
                <button id="restart-btn" data-lang-key="restart"></button>
            </div>
        </div>
    </div>

    <script>
    const TIGER = 'TIGER';
    const GOAT = 'GOAT';
    const EMPTY = null;
    const GOATS_TO_CAPTURE_FOR_WIN = 5;

    const translations = {
        gameTitle: { or: 'ବାଘ ଛେଳି', en: 'Bagh Chheli' },
        tigers: { or: 'ବାଘ', en: 'Tigers' },
        goats: { or: 'ଛେଳି', en: 'Goats' },
        online: { or: 'ଅନଲାଇନ୍', en: 'Online' },
        restart: { or: 'ପୁନଃ ଆରମ୍ଭ', en: 'Restart' },
        confirm_restart_text: { or: 'ଆପଣ ନିଶ୍ଚିତ ଯେ ଆପଣ ପୁନର୍ବାର ଆରମ୍ଭ କରିବାକୁ ଚାହୁଁଛନ୍ତି?', en: 'Are you sure you want to restart?' },
        tiger_placement: { or: 'ବାଘ: ୪ଟି ବାଘ ରଖନ୍ତୁ', en: 'Tiger: Place 4 tigers' },
        goat_initial_placement: { or: 'ଛେଳି: ୪ ଟି ଛେଳି ରଖନ୍ତୁ', en: 'Goat: Place 4 goats' },
        tiger_turn: { or: 'ବାଘର ପାଳି', en: "Tiger's Turn" },
        goat_placement_turn: { or: 'ଛେଳିର ପାଳି: ଗୋଟିଏ ଛେଳି ରଖନ୍ତୁ', en: "Goat's Turn: Place a goat" },
        goat_move_turn: { or: 'ଛେଳିର ପାଳି: ଗୋଟିଏ ଛେଳି ଚଲାନ୍ତୁ', en: "Goat's Turn: Move a goat" },
        tigers_win: { or: 'ବାଘ ଜିତିଲା!', en: 'Tigers Win!' },
        goats_win_trapped: { or: 'ଛେଳି ଜିତିଲା! (ବାଘ ଅଟକି ଯାଇଛି)', en: 'Goats Win! (Tigers are trapped)' },
        goats_win_paani: { or: 'ଛେଳି ଜିତିଲା! (ପାଣି ଘର)', en: 'Goats Win! (Paani Ghara)' },
    };
    
    const TIGER_IMG_URL = 'https://raw.githubusercontent.com/imsbg/odiagames/refs/heads/main/bagha-chheli/tiger.png';
    const GOAT_IMG_URL = 'https://raw.githubusercontent.com/imsbg/odiagames/refs/heads/main/bagha-chheli/goat.png';

    const NUM_POINTS = 25;
    const ADJACENCY_MAP = [
        [1, 5, 6], [0, 2, 6], [1, 3, 6, 7, 8], [2, 4, 8], [3, 8, 9], [0, 6, 10], 
        [0, 1, 2, 5, 7, 10, 11, 12], [2, 6, 8, 12], [2, 3, 4, 7, 9, 12, 13, 14], [4, 8, 14], [5, 6, 11, 15, 16], 
        [6, 10, 12, 16], [6, 7, 8, 11, 13, 16, 17, 18], [8, 12, 14, 18], [8, 9, 13, 18, 19], [10, 16, 20], 
        [10, 11, 12, 15, 17, 20, 21, 22], [12, 16, 18, 22], [12, 13, 14, 17, 19, 22, 23, 24], [14, 18, 24], 
        [15, 16, 21], [16, 20, 22], [16, 17, 18, 21, 23], [18, 22, 24], [18, 19, 23]
    ];
    
    const POINT_COORDS = Array.from({length: 25}, (_, i) => ({ x: (i % 5) * 25, y: Math.floor(i / 5) * 25 }));
    const SVG_NS = "http://www.w3.org/2000/svg";

    const dom = {
        boardSvg: document.getElementById('game-board-svg'),
        tigerScore: document.getElementById('tiger-score'),
        goatScore: document.getElementById('goat-score'),
        tigerBox: document.getElementById('tiger-player-box'),
        goatBox: document.getElementById('goat-player-box'),
        statusMessage: document.getElementById('status-message'),
        langSwitchBtn: document.getElementById('lang-switch-btn'),
        restartBtn: document.getElementById('restart-btn'),
    };

    let state = {};
    let currentLanguage = 'or';

    function initGame() {
        state = {
            board: Array(NUM_POINTS).fill(EMPTY), currentTurn: TIGER, phase: 'TIGER_PLACEMENT',
            tigersToPlace: 4, goatsToPlaceInitially: 4, goatsPlacedTotal: 0,
            goatsOnBoard: 0, goatsCaptured: 0, selectedPieceIndex: null, gameOver: false, winner: null
        };
        createBoard();
        setLanguage(currentLanguage);
    }
    
    function createBoard() {
        dom.boardSvg.innerHTML = '';
        const lineGroup = document.createElementNS(SVG_NS, 'g');
        ADJACENCY_MAP.forEach((neighbors, i) => {
            neighbors.forEach(neighborIndex => {
                if (i < neighborIndex) {
                    const line = document.createElementNS(SVG_NS, 'line');
                    line.setAttribute('x1', POINT_COORDS[i].x); line.setAttribute('y1', POINT_COORDS[i].y);
                    line.setAttribute('x2', POINT_COORDS[neighborIndex].x); line.setAttribute('y2', POINT_COORDS[neighborIndex].y);
                    lineGroup.appendChild(line);
                }
            });
        });
        dom.boardSvg.appendChild(lineGroup);
        const pointGroup = document.createElementNS(SVG_NS, 'g');
        POINT_COORDS.forEach((coord, i) => {
            const circle = document.createElementNS(SVG_NS, 'circle');
            circle.setAttribute('cx', coord.x); circle.setAttribute('cy', coord.y);
            circle.setAttribute('r', 12);
            circle.classList.add('clickable-point'); circle.dataset.index = i;
            pointGroup.appendChild(circle);
        });
        dom.boardSvg.appendChild(pointGroup);
        const pieceGroup = document.createElementNS(SVG_NS, 'g');
        pieceGroup.id = 'piece-group';
        dom.boardSvg.appendChild(pieceGroup);
    }

    function renderPieces() {
        const pieceGroup = dom.boardSvg.querySelector('#piece-group');
        if (!pieceGroup) return;
        pieceGroup.innerHTML = '';
        state.board.forEach((pieceType, i) => {
            if (pieceType) {
                const coord = POINT_COORDS[i];
                const isTiger = pieceType === TIGER;
                const size = isTiger ? 22 : 18;
                const image = document.createElementNS(SVG_NS, 'image');
                image.setAttribute('href', isTiger ? TIGER_IMG_URL : GOAT_IMG_URL);
                image.setAttribute('x', coord.x - size / 2); image.setAttribute('y', coord.y - size / 2);
                image.setAttribute('width', size); image.setAttribute('height', size);
                image.classList.add('piece-image');
                if (i === state.selectedPieceIndex) { image.classList.add('selected'); }
                pieceGroup.appendChild(image);
            }
        });
    }

    function updateUI() {
        renderPieces();
        dom.tigerScore.textContent = `4 / ${state.goatsCaptured}`;
        dom.goatScore.textContent = `${state.goatsOnBoard}/${20 - state.goatsCaptured}`;
        dom.tigerBox.classList.toggle('active-player', state.currentTurn === TIGER && !state.gameOver);
        dom.goatBox.classList.toggle('active-player', state.currentTurn === GOAT && !state.gameOver);
        let msgKey = '';
        if (state.gameOver) {
            msgKey = state.winner === TIGER ? 'tigers_win' : state.winner;
        } else {
            switch (state.phase) {
                case 'TIGER_PLACEMENT': msgKey = 'tiger_placement'; break;
                case 'GOAT_INITIAL_PLACEMENT': msgKey = 'goat_initial_placement'; break;
                case 'MAIN_PLAY': msgKey = state.currentTurn === TIGER ? 'tiger_turn' : 'goat_placement_turn'; break;
                case 'GOAT_MOVEMENT': msgKey = state.currentTurn === TIGER ? 'tiger_turn' : 'goat_move_turn'; break;
            }
        }
        dom.statusMessage.textContent = translations[msgKey]?.[currentLanguage] || '';
    }

    function handlePointClick(index) {
        if (state.gameOver) return;
        switch (state.phase) {
            case 'TIGER_PLACEMENT': if (state.board[index] === EMPTY) {
                state.board[index] = TIGER; state.tigersToPlace--;
                if (state.tigersToPlace === 0) { state.phase = 'GOAT_INITIAL_PLACEMENT'; state.currentTurn = GOAT; }
                updateUI();
            } break;
            case 'GOAT_INITIAL_PLACEMENT': if (state.board[index] === EMPTY) {
                state.board[index] = GOAT; state.goatsPlacedTotal++; state.goatsOnBoard++; state.goatsToPlaceInitially--;
                if (state.goatsToPlaceInitially === 0) { state.phase = 'MAIN_PLAY'; switchTurn(true); } else { updateUI(); }
            } break;
            case 'MAIN_PLAY':
                if (state.currentTurn === GOAT) {
                    if (state.board[index] === EMPTY) {
                        state.board[index] = GOAT; state.goatsPlacedTotal++; state.goatsOnBoard++;
                        if (state.goatsPlacedTotal === 20) { state.phase = 'GOAT_MOVEMENT'; }
                        switchTurn();
                    }
                } else { handleMove(index); }
                break;
            case 'GOAT_MOVEMENT': handleMove(index); break;
        }
    }
    
    function handleMove(index) {
        if (state.selectedPieceIndex === null) {
            if (state.board[index] === state.currentTurn) {
                state.selectedPieceIndex = index; updateUI();
            }
        } else {
            const startIndex = state.selectedPieceIndex;
            let moveMade = false;
            if (state.board[index] === EMPTY) {
                const capture = isTigerCapture(startIndex, index);
                if (state.currentTurn === TIGER && capture.isCapture) {
                    movePiece(startIndex, index); state.board[capture.middleIndex] = EMPTY;
                    state.goatsCaptured++; state.goatsOnBoard--; moveMade = true;
                } else if (isAdjacent(startIndex, index)) {
                    movePiece(startIndex, index); moveMade = true;
                }
            }
            state.selectedPieceIndex = null;
            if (moveMade) { switchTurn(); } else { updateUI(); }
        }
    }
    
    function movePiece(from, to) { state.board[to] = state.board[from]; state.board[from] = EMPTY; }

    function switchTurn(fromInitialPlacement = false) {
        state.currentTurn = fromInitialPlacement ? TIGER : (state.currentTurn === TIGER) ? GOAT : TIGER;
        checkForWin();
    }

    function endGame(winner) { state.gameOver = true; state.winner = winner; }
    
    function checkForWin() {
        if (!state.gameOver) {
             if (state.goatsCaptured >= GOATS_TO_CAPTURE_FOR_WIN) {
                endGame(TIGER);
            } else if (state.phase !== 'TIGER_PLACEMENT' && state.phase !== 'GOAT_INITIAL_PLACEMENT') {
                const tigerIndices = state.board.map((p, i) => p === TIGER ? i : -1).filter(i => i !== -1);
                if (tigerIndices.length > 0 && !tigerIndices.some(canTigerMove)) {
                    if (state.goatsPlacedTotal === 20 && state.goatsCaptured === 0) {
                        endGame('goats_win_paani');
                    } else {
                        endGame('goats_win_trapped');
                    }
                }
            }
        }
        updateUI();
    }

    function isAdjacent(idx1, idx2) { return ADJACENCY_MAP[idx1].includes(idx2); }
    
    function isTigerCapture(start, end) {
        if (state.board[start] !== TIGER || state.board[end] !== EMPTY) return { isCapture: false };
        const mid = start + (end - start) / 2;
        if (Number.isInteger(mid) && state.board[mid] === GOAT && isAdjacent(start, mid) && isAdjacent(mid, end)) {
            const dx1 = (mid % 5) - (start % 5), dy1 = Math.floor(mid / 5) - Math.floor(start / 5);
            const dx2 = (end % 5) - (mid % 5), dy2 = Math.floor(end / 5) - Math.floor(mid / 5);
            if (dx1 === dx2 && dy1 === dy2) return { isCapture: true, middleIndex: mid };
        }
        return { isCapture: false };
    }
    
    function canTigerMove(tigerIndex) {
        if (ADJACENCY_MAP[tigerIndex].some(n => state.board[n] === EMPTY)) return true;
        for (let i = 0; i < NUM_POINTS; i++) { if (isTigerCapture(tigerIndex, i).isCapture) return true; }
        return false;
    }
    
    function setLanguage(lang) {
        currentLanguage = lang; document.documentElement.lang = lang;
        document.body.style.fontFamily = lang === 'or' ? "'Noto Sans Oriya', 'Nunito', sans-serif" : "'Nunito', 'Noto Sans Oriya', sans-serif";
        dom.langSwitchBtn.textContent = lang === 'or' ? 'EN' : 'ଓଡ଼ିଆ';
        document.querySelectorAll('[data-lang-key]').forEach(el => {
            const key = el.dataset.langKey;
            if (translations[key]) el.textContent = translations[key][lang];
        });
        localStorage.setItem('preferredLanguage', lang);
        updateUI();
    }
    
    function showRestartConfirmation() {
        const text = translations['confirm_restart_text'][currentLanguage] || 'Are you sure you want to restart?';
        if (confirm(text)) { initGame(); }
    }
    
    dom.restartBtn.addEventListener('click', showRestartConfirmation);
    dom.langSwitchBtn.addEventListener('click', () => { setLanguage(currentLanguage === 'or' ? 'en' : 'or'); });
    dom.boardSvg.addEventListener('click', (e) => {
        if (e.target.classList.contains('clickable-point')) {
            handlePointClick(parseInt(e.target.dataset.index));
        }
    });
    
    const savedLang = localStorage.getItem('preferredLanguage');
    setLanguage(savedLang || 'or');
    initGame();
    </script>
</body>
</html>
